# âœ¨ å¯å˜å¼å±æ€§å·¥å…·

## ğŸŒŸ ç‰¹ç‚¹

1. **çµæ´»æ€§**ï¼šæ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼ˆå¦‚ `int`ã€`float`ã€`Vector2`ã€`Vector3` ç­‰ï¼‰ï¼Œé€šè¿‡æ³›å‹å®ç°ã€‚
2. **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒè‡ªå®šä¹‰è®¡ç®—é€»è¾‘ï¼Œé€šè¿‡ `AttributeAction` æ’å…¥è®¡ç®—å¼ã€‚
3. **äº‹ä»¶é©±åŠ¨**ï¼šæ”¯æŒå€¼å˜åŒ–äº‹ä»¶ç›‘å¬ï¼Œä¾¿äºå“åº”å±æ€§å˜åŒ–ã€‚
4. **ä¼˜å…ˆçº§ç®¡ç†**ï¼šé€šè¿‡ `AttributePriority` ç®¡ç†è®¡ç®—å¼çš„æ‰§è¡Œé¡ºåºã€‚
5. **æ˜“äºé›†æˆ**ï¼šä¸ Unity å¼•æ“æ— ç¼ç»“åˆï¼Œæ”¯æŒåºåˆ—åŒ–ã€‚

## ğŸ›  åŠŸèƒ½

- **å±æ€§å€¼ç®¡ç†**ï¼šæ”¯æŒè·å–å½“å‰å€¼ã€åŸå§‹å€¼ä»¥åŠé‡ç½®å€¼ã€‚
- **è®¡ç®—å¼æ’å…¥**ï¼šé€šè¿‡æ ‡ç­¾å’Œä¼˜å…ˆçº§æ’å…¥è®¡ç®—é€»è¾‘ã€‚
- **äº‹ä»¶ç›‘å¬**ï¼šæ”¯æŒå€¼å˜åŒ–äº‹ä»¶çš„è®¢é˜…å’Œè§¦å‘ã€‚
- **å…‹éš†ä¸æ¯”è¾ƒ**ï¼šæ”¯æŒå±æ€§å€¼çš„å…‹éš†å’Œæ¯”è¾ƒæ“ä½œã€‚
- **æ‰©å±•æ–¹æ³•**ï¼šæä¾›ä¾¿æ·çš„æ‰©å±•æ–¹æ³•ï¼ˆå¦‚å‘é‡çš„å½’ä¸€åŒ–ã€æ±‚æ¨¡ç­‰ï¼‰ã€‚

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### 1. åˆ›å»ºå±æ€§å€¼

```csharp
var attributeInt = new AttributeInt(10);
var attributeFloat = new AttributeFloat(5.5f);
```

### 2. æ’å…¥è®¡ç®—å¼

```csharp
attributeInt.Push("AddFive", (current, origin) => current + 5);
attributeFloat.Push("Multiply", (current, origin) => current * 2);
```

### 3. ç§»é™¤è®¡ç®—å¼

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•ç§»é™¤å·²æ’å…¥çš„è®¡ç®—å¼ï¼š

   1. æŒ‰æ ‡ç­¾ç§»é™¤

   ```csharp
   attributeInt.Remove("AddFive");
   ```

   2. æŒ‰å…·ä½“è®¡ç®—å¼ç§»é™¤

   ```csharp
   var action = attributeInt.Find(a => a.ActionTag == "AddFive");
   attributeInt.Remove(action);
   ```

   3. ç§»é™¤æœ€åä¸€ä¸ªè®¡ç®—å¼

   ```csharp
   attributeInt.Pop();
   ```

   4. æ¸…ç©ºæ‰€æœ‰è®¡ç®—å¼

   ```csharp
   attributeInt.ResetAction();
   ```

### 4. è·å–å±æ€§å€¼

```csharp
int currentInt = attributeInt.GetCurrent();
float currentFloat = attributeFloat.GetCurrent();
```

### 5. ç›‘å¬å€¼å˜åŒ–

```csharp
attributeInt.onValueChange += (current, origin, prev) =>
{
    Debug.Log($"Value changed from {prev} to {current}");
};
```

### 6. é‡ç½®å±æ€§å€¼

```csharp
attributeInt.Reset(20);
```

### 7. æ‰©å±•æ–¹æ³•ä½¿ç”¨

```csharp
var vector3 = new AttributeVector3(new Vector3(1, 2, 3));
var normalized = vector3.Normalize();
float magnitude = vector3.Magnitude();
```

### 8. æ‰©å±•è‡ªå®šä¹‰å±æ€§

æ‚¨å¯ä»¥é€šè¿‡ç»§æ‰¿ `AttributeValue<T>` ç±»æ¥æ‰©å±•è‡ªå®šä¹‰å±æ€§å€¼ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ª `AttributeBool` ç±»ï¼š

```csharp
using System;

namespace PowerCellStudio
{
    [Serializable]
    public class AttributeBool : AttributeValue<bool>
    {
        public AttributeBool(bool initValue) : base(initValue) { }

        public static implicit operator bool(AttributeBool i)
        {
            return i.GetCurrent();
        }
    }
}
```

ç„¶åå¯ä»¥åƒå…¶ä»–å±æ€§å€¼ä¸€æ ·ä½¿ç”¨ï¼š

```csharp
var attributeBool = new AttributeBool(true);
attributeBool.Push("Invert", (current, origin) => !current);
Debug.Log(attributeBool.GetCurrent()); // è¾“å‡º false
```

## âš  æ³¨æ„äº‹é¡¹

1. **åºåˆ—åŒ–æ”¯æŒ**ï¼šç¡®ä¿å±æ€§å€¼ç±»å’Œç›¸å…³å®¹å™¨æ”¯æŒ Unity çš„åºåˆ—åŒ–æœºåˆ¶ã€‚
2. **äº‹ä»¶è®¢é˜…**ï¼šé¿å…äº‹ä»¶è®¢é˜…å¯¼è‡´çš„å†…å­˜æ³„æ¼ï¼Œå¿…è¦æ—¶å–æ¶ˆè®¢é˜…ã€‚
3. **è®¡ç®—å¼é¡ºåº**ï¼šæ’å…¥è®¡ç®—å¼æ—¶æ³¨æ„ä¼˜å…ˆçº§ï¼Œé¿å…é€»è¾‘å†²çªã€‚
4. **ç±»å‹å®‰å…¨**ï¼šç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ç±»å‹è½¬æ¢ï¼Œé¿å…éšå¼è½¬æ¢å¼•å‘é”™è¯¯ã€‚

## ğŸš€ ç¤ºä¾‹ä»£ç 

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼š

```csharp
var attribute = new AttributeFloat(10.0f);
attribute.Push("AddTen", (current, origin) => current + 10);
attribute.onValueChange += (current, origin, prev) =>
{
    Debug.Log($"Value changed from {prev} to {current}");
};
Debug.Log(attribute.GetCurrent()); // è¾“å‡º 20.0
```

é€šè¿‡ä»¥ä¸ŠåŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•ï¼Œæ‚¨å¯ä»¥è½»æ¾ç®¡ç†å¤æ‚çš„å±æ€§é€»è¾‘ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚
