# æœ¬åœ°åŒ–ç®¡ç†å·¥å…·æ–‡æ¡£

## ğŸŒ **å·¥å…·ç‰¹ç‚¹**

1. **å¤šè¯­è¨€æ”¯æŒ**  
   - æ”¯æŒå¤šè¯­è¨€åˆ‡æ¢ï¼Œé»˜è®¤æ”¯æŒç®€ä½“ä¸­æ–‡ã€ç¹ä½“ä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ç­‰è¯­è¨€ã€‚
   - æä¾›è¯­è¨€åˆ‡æ¢äº‹ä»¶ï¼Œæ–¹ä¾¿åŠ¨æ€æ›´æ–°ç•Œé¢å†…å®¹ã€‚

2. **åŸºäº Unity.Localization**  
   - ä½¿ç”¨ Unity.Localization æä¾›çš„ `StringTable` å’Œ `AssetTable` ç®¡ç†æœ¬åœ°åŒ–å­—ç¬¦ä¸²å’Œèµ„æºã€‚
   - æ”¯æŒåŠ¨æ€åŠ è½½æœ¬åœ°åŒ–å­—ç¬¦ä¸²å’Œèµ„æºã€‚

3. **åŠ¨æ€å­—ä½“åˆ‡æ¢**  
   - æ ¹æ®è¯­è¨€è‡ªåŠ¨åˆ‡æ¢å­—ä½“ï¼Œç¡®ä¿ä¸åŒè¯­è¨€çš„æ˜¾ç¤ºæ•ˆæœä¸€è‡´ã€‚
   - æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šä¸åŒè¯­è¨€çš„å­—ä½“è·¯å¾„ã€‚

4. **çµæ´»çš„æœ¬åœ°åŒ–ç»„ä»¶**  
   - æä¾› `TextEx` å’Œ `TextMeshProUGUIEx` ç»„ä»¶ï¼Œæ”¯æŒé™æ€æ–‡æœ¬å’ŒåŠ¨æ€æœ¬åœ°åŒ–æ–‡æœ¬ã€‚
   - æ”¯æŒé€šè¿‡ Inspector é¢æ¿å¿«é€Ÿç”Ÿæˆå’Œç»‘å®šæœ¬åœ°åŒ– Keyã€‚

5. **äº‹ä»¶é©±åŠ¨**  
   - æä¾› `onLanguageChange` äº‹ä»¶ï¼Œè¯­è¨€åˆ‡æ¢æ—¶è‡ªåŠ¨æ›´æ–°ç•Œé¢å†…å®¹ã€‚

6. **èµ„æºç®¡ç†é›†æˆ**  
   - ä½¿ç”¨ `IAssetLoader` åŠ¨æ€åŠ è½½å­—ä½“èµ„æºï¼Œé¿å…èµ„æºæµªè´¹ã€‚

---

## ğŸ› ï¸ **ä½¿ç”¨æ–¹æ³•**

### 1. **åˆå§‹åŒ–æœ¬åœ°åŒ–ç®¡ç†å™¨**
æœ¬åœ°åŒ–ç®¡ç†å™¨ä¼šåœ¨æ¸¸æˆå¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ã€‚  
å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç åˆå§‹åŒ–å¹¶è®¾ç½®é»˜è®¤è¯­è¨€ï¼š

```csharp
LocalizationManager.instance.Init(() =>
{
    Debug.Log("Localization Manager Initialized");
});
```

---

### 2. **è·å–æœ¬åœ°åŒ–å­—ç¬¦ä¸²**

#### a. **é€šè¿‡ Key è·å–å­—ç¬¦ä¸²**
```csharp
string localizedText = LocalizationManager.instance.GetString("example_key");
```

#### b. **å¸¦å‚æ•°çš„æœ¬åœ°åŒ–å­—ç¬¦ä¸²**
```csharp
string localizedText = LocalizationManager.instance.GetString("example_key", "param1", "param2");
```

#### c. **å°è¯•è·å–å­—ç¬¦ä¸²**
```csharp
if (LocalizationManager.instance.TryGetString("example_key", out string result))
{
    Debug.Log($"Localized Text: {result}");
}
```

---

### 3. **åˆ‡æ¢è¯­è¨€**

#### a. **åˆ‡æ¢åˆ°æŒ‡å®šè¯­è¨€**
```csharp
LocalizationManager.instance.ChangeLanguage(Language.English, () =>
{
    Debug.Log("Language switched to English");
});
```

#### b. **è·å–å½“å‰è¯­è¨€**
```csharp
Language currentLanguage = LocalizationManager.instance.curLanguage;
Debug.Log($"Current Language: {currentLanguage}");
```

---

### 4. **åŠ¨æ€å­—ä½“åˆ‡æ¢**
æœ¬åœ°åŒ–ç®¡ç†å™¨ä¼šæ ¹æ®å½“å‰è¯­è¨€è‡ªåŠ¨åŠ è½½å¯¹åº”çš„å­—ä½“èµ„æºã€‚  
å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç è·å–å½“å‰è¯­è¨€çš„å­—ä½“ï¼š
```csharp
Font currentFont = LocalizationManager.instance.font;
```

---

### 5. **æœ¬åœ°åŒ–ç»„ä»¶**

#### a. **ä½¿ç”¨ `TextEx`**
- `TextEx` æ˜¯ Unity åŸç”Ÿ `Text` çš„æ‰©å±•ï¼Œæ”¯æŒæœ¬åœ°åŒ–åŠŸèƒ½ã€‚
- åœ¨ Inspector é¢æ¿ä¸­å‹¾é€‰ `Static Text`ï¼Œå¹¶è®¾ç½® `Localization Key`ã€‚
- è¯­è¨€åˆ‡æ¢æ—¶ï¼Œ`TextEx` ä¼šè‡ªåŠ¨æ›´æ–°æ˜¾ç¤ºå†…å®¹ã€‚

#### b. **ä½¿ç”¨ `TextMeshProUGUIEx`**
- `TextMeshProUGUIEx` æ˜¯ TextMeshPro çš„æ‰©å±•ï¼Œæ”¯æŒæœ¬åœ°åŒ–åŠŸèƒ½ã€‚
- åœ¨ Inspector é¢æ¿ä¸­å‹¾é€‰ `Static Text`ï¼Œå¹¶è®¾ç½® `Localization Key`ã€‚
- è¯­è¨€åˆ‡æ¢æ—¶ï¼Œ`TextMeshProUGUIEx` ä¼šè‡ªåŠ¨æ›´æ–°æ˜¾ç¤ºå†…å®¹ã€‚

#### c. **åŠ¨æ€è®¾ç½®æœ¬åœ°åŒ–æ–‡æœ¬**
```csharp
TextEx textEx = GetComponent<TextEx>();
textEx.SetLocalizationText("example_key", "param1", "param2");
```

---

### 6. **æœ¬åœ°åŒ–èµ„æº**

#### a. **è·å–æœ¬åœ°åŒ–èµ„æº GUID**
```csharp
string assetGuid = LocalizationManager.instance.GetAssetGuid("example_asset_key");
```

#### b. **å°è¯•è·å–èµ„æº GUID**
```csharp
if (LocalizationManager.instance.TryGetAssetGuid("example_asset_key", out string result))
{
    Debug.Log($"Localized Asset GUID: {result}");
}
```

#### c. **å’Œé…ç½®è¡¨å·¥å…·ç»“åˆä½¿ç”¨**
é…ç½®è¡¨å·¥å…·æ”¯æŒå°†é…ç½®è¡¨ä¸­çš„æœ¬åœ°åŒ–å­—ç¬¦ä¸²æå–å¹¶å¯¼å‡ºä¸º CSV æ–‡ä»¶ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†å’Œç¿»è¯‘ã€‚ä»¥ä¸‹æ˜¯ç»“åˆä½¿ç”¨çš„æ­¥éª¤ï¼š

1. **åœ¨é…ç½®è¡¨ä¸­å®šä¹‰æœ¬åœ°åŒ–å­—æ®µ**  
   åœ¨ Excel é…ç½®è¡¨ä¸­ï¼Œå°†éœ€è¦æœ¬åœ°åŒ–çš„å­—æ®µç±»å‹è®¾ç½®ä¸º `LocString` æˆ– `LocAsset`ã€‚ä¾‹å¦‚ï¼š
   ```plaintext
   | æ³¨é‡Š       | id | åç§°       | æè¿°               |
   |------------|----|------------|--------------------|
   | å­—æ®µåç§°   | id | name       | description        |
   | å­—æ®µç±»å‹   | int| LocString  | LocString          |
   | æ•°æ®       | 1  | hero_name  | hero_description   |
   | æ•°æ®       | 2  | monster_name| monster_description|
   ```

2. **æå–æœ¬åœ°åŒ–å­—ç¬¦ä¸²**  
   åœ¨ `Config Setting Window` ä¸­ç‚¹å‡» **Create Localization csv** æŒ‰é’®ï¼Œå·¥å…·ä¼šè‡ªåŠ¨æå–é…ç½®è¡¨ä¸­çš„æœ¬åœ°åŒ–å­—æ®µå¹¶ç”Ÿæˆ CSV æ–‡ä»¶ã€‚

3. **ç¿»è¯‘ CSV æ–‡ä»¶**  
   å°†ç”Ÿæˆçš„ CSV æ–‡ä»¶äº¤ç»™ç¿»è¯‘äººå‘˜è¿›è¡Œç¿»è¯‘ï¼Œå®Œæˆåå°†ç¿»è¯‘åçš„ CSV æ–‡ä»¶å¯¼å…¥ Unity é¡¹ç›®ã€‚

4. **åŠ è½½æœ¬åœ°åŒ–æ•°æ®**  
   ä½¿ç”¨æœ¬åœ°åŒ–ç®¡ç†å·¥å…·åŠ è½½ç¿»è¯‘åçš„ CSV æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ `LocalizationManager` è·å–å¯¹åº”çš„æœ¬åœ°åŒ–å­—ç¬¦ä¸²ã€‚

5. **ç›´æ¥ä»é…ç½®è¡¨æ•°æ®ä¸­è·å¾—æœ¬åœ°åŒ–æ–‡æœ¬**  
   LocString å’Œ LocAsset ç±»å‹çš„å­—æ®µå¯ä»¥ç›´æ¥ä»é…ç½®è¡¨æ•°æ®ä¸­è·å¾—æœ¬åœ°åŒ–æ–‡æœ¬ï¼Œæ— éœ€é¢å¤–å¤„ç†ã€‚

   ```csharp
   // è·å–æœ¬åœ°åŒ–æ–‡æœ¬
   string localizedText = configData.hero_name.ToString(); 
   // æˆ–ä½¿ç”¨ Get() æ–¹æ³•
   string localizedText = configData.hero_name.Get();
   ```

---

## âš ï¸ **æ³¨æ„äº‹é¡¹**

1. **æœ¬åœ°åŒ– Key ç®¡ç†**  
   - ç¡®ä¿æ‰€æœ‰æœ¬åœ°åŒ– Key å”¯ä¸€ä¸”æ­£ç¡®é…ç½®åœ¨ `StringTable` æˆ– `AssetTable` ä¸­ã€‚

2. **å­—ä½“èµ„æºè·¯å¾„**  
   - åœ¨é…ç½®æ–‡ä»¶ä¸­ä¸ºæ¯ç§è¯­è¨€æŒ‡å®šå¯¹åº”çš„å­—ä½“è·¯å¾„ï¼Œç¡®ä¿å­—ä½“èµ„æºæ­£ç¡®åŠ è½½ã€‚

3. **åŠ¨æ€åŠ è½½èµ„æº**  
   - æœ¬åœ°åŒ–èµ„æºå’Œå­—ä½“é€šè¿‡ `IAssetLoader` åŠ¨æ€åŠ è½½ï¼Œéœ€ç¡®ä¿èµ„æºè·¯å¾„æ­£ç¡®ã€‚

4. **äº‹ä»¶ç›‘å¬**  
   - ä½¿ç”¨ `onLanguageChange` äº‹ä»¶ç›‘å¬è¯­è¨€åˆ‡æ¢ï¼ŒåŠ¨æ€æ›´æ–°ç•Œé¢å†…å®¹ã€‚

5. **ç»„ä»¶ä½¿ç”¨**  
   - ä½¿ç”¨ `TextEx` å’Œ `TextMeshProUGUIEx` æ—¶ï¼Œéœ€åœ¨ Inspector é¢æ¿ä¸­æ­£ç¡®è®¾ç½® `Localization Key`ã€‚

6. **æ€§èƒ½ä¼˜åŒ–**  
   - é¿å…é¢‘ç¹åˆ‡æ¢è¯­è¨€ï¼Œå‡å°‘ä¸å¿…è¦çš„èµ„æºåŠ è½½ã€‚

---

## ğŸ“‚ **æ–‡ä»¶ç»“æ„**

```plaintext
Editor/
   â””â”€â”€ UI/
         â”œâ”€â”€ TextExEditor.cs                # TextEx çš„è‡ªå®šä¹‰ Inspector
         â””â”€â”€ TextMeshProUGUIExEditor.cs     # TextMeshProUGUIEx çš„è‡ªå®šä¹‰ Inspector
Systems/
   â””â”€â”€ LocalizationSystem/
         â””â”€â”€ LocalizationManager.cs         # æœ¬åœ°åŒ–ç®¡ç†å™¨ä¸»é€»è¾‘
Toolkit/
   â””â”€â”€ UIToolKit/
         â”œâ”€â”€ TextEx.cs                      # æ”¯æŒæœ¬åœ°åŒ–çš„ Text ç»„ä»¶
         â””â”€â”€ TextMeshProUGUIEx.cs           # æ”¯æŒæœ¬åœ°åŒ–çš„ TextMeshPro ç»„ä»¶
```
